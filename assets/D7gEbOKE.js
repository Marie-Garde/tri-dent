import{_ as B}from"./DvTjKVtj.js";import{_ as L}from"./pVouwi7u.js";import{e as y,B as j,C as D,c as a,a as s,s as I,v as N,o as n,_ as C,t as m,h as E,g as p,j as v,D as F,b as h,n as V,f as d,F as P,k,E as A,l as U,i as b,w as O}from"./DJfBaE14.js";import{u as Q,a as R}from"./B-cjh3Ia.js";const z={class:"articles-search"},G={class:"search-box"},H=y({__name:"ArticlesSearch",props:j({filteredCount:{}},{modelValue:{default:""},modelModifiers:{}}),emits:["update:modelValue"],setup(c){const i=D(c,"modelValue");return(o,l)=>(n(),a("div",z,[s("div",G,[I(s("input",{"onUpdate:modelValue":l[0]||(l[0]=g=>i.value=g),type:"text",placeholder:"Rechercher un article",class:"search-input"},null,512),[[N,i.value]]),l[1]||(l[1]=s("span",{class:"search-icon"},"ðŸ”",-1))])]))}}),J=Object.assign(C(H,[["__scopeId","data-v-69604489"]]),{__name:"ArticlesSearch"}),K={class:"pagination"},W=["disabled"],X=["disabled"],Y={class:"pagination__info"},Z=["disabled"],ee=["disabled"],te=y({__name:"Pagination",props:{currentPage:{},totalPages:{}},emits:["update:currentPage"],setup(c){return(i,o)=>(n(),a("div",K,[s("button",{class:"pagination__arrow",disabled:c.currentPage===1,onClick:o[0]||(o[0]=l=>i.$emit("update:currentPage",1)),title:"PremiÃ¨re page"}," Â« ",8,W),s("button",{class:"pagination__arrow",disabled:c.currentPage===1,onClick:o[1]||(o[1]=l=>i.$emit("update:currentPage",c.currentPage-1)),title:"Page prÃ©cÃ©dente"}," â€¹ ",8,X),s("div",Y," Page "+m(c.currentPage)+" sur "+m(c.totalPages),1),s("button",{class:"pagination__arrow",disabled:c.currentPage===c.totalPages,onClick:o[2]||(o[2]=l=>i.$emit("update:currentPage",c.currentPage+1)),title:"Page suivante"}," â€º ",8,Z),s("button",{class:"pagination__arrow",disabled:c.currentPage===c.totalPages,onClick:o[3]||(o[3]=l=>i.$emit("update:currentPage",c.totalPages)),title:"DerniÃ¨re page"}," Â» ",8,ee)]))}}),se=Object.assign(C(te,[["__scopeId","data-v-570c56fd"]]),{__name:"Pagination"}),ne={class:"info"},ae={class:"info__banner"},oe={class:"info__banner__content"},ie={class:"info__container"},le={class:"info__sidebar"},re=["onClick"],ce={class:"info__content"},de={key:0,class:"loading"},ue={key:1,class:"error"},_e={key:2,class:"no-articles"},ge={key:3},me={class:"articles-list"},fe={class:"article-card__image"},ve=["src","alt"],pe={key:1,class:"article-card__placeholder"},he={class:"article-card__content"},Pe={key:0,class:"article-card__tags"},ke={key:1,class:"article-card__excerpt"},$=5,be=y({__name:"index",setup(c){const i=Q();E(async()=>{await Promise.all([i.fetchArticles(),i.fetchThematiques()])});const o=p(null),l=p(""),g=p(1),M=v(()=>i.thematiques),f=v(()=>{let r=i.articles;if(o.value&&(r=r.filter(e=>e.thematique?.some(u=>u._id===o.value))),l.value.trim()){const e=l.value.toLowerCase().trim();r=r.filter(u=>{const t=u.titre.toLowerCase().includes(e),_=u.tags?.some(S=>S.titre.toLowerCase().includes(e));return t||_})}return r}),x=v(()=>Math.ceil(f.value.length/$)),T=v(()=>{const r=(g.value-1)*$,e=r+$;return f.value.slice(r,e)});F([l,o],()=>{g.value=1});function w(r){o.value=r}function q(r){if(!r||r.length===0)return"";let e="";for(const t of r)if(t._type==="block"&&t.children)for(const _ of t.children)_.text&&(e+=_.text+" ");const u=e.trim().split(/\s+/);return u.length<=20?e.trim():u.slice(0,20).join(" ")+"..."}return(r,e)=>{const u=B;return n(),a("div",ne,[s("div",ae,[s("div",oe,[e[3]||(e[3]=s("h1",null,"Informations mÃ©dicales",-1)),h(L,{light:""})])]),s("div",ie,[s("div",le,[e[4]||(e[4]=s("h3",null,"ThÃ©matiques",-1)),s("ul",null,[s("li",{class:V({active:d(o)===null})},[s("a",{onClick:e[0]||(e[0]=t=>w(null))},"Toutes les thÃ©matiques")],2),(n(!0),a(P,null,k(d(M),t=>(n(),a("li",{key:t._id,class:V({active:d(o)===t._id})},[s("a",{onClick:_=>w(t._id)},m(t.titre),9,re)],2))),128))])]),s("div",ce,[h(J,{modelValue:d(l),"onUpdate:modelValue":e[1]||(e[1]=t=>A(l)?l.value=t:null),"filtered-count":d(f).length},null,8,["modelValue","filtered-count"]),d(i).loading?(n(),a("div",de,[...e[5]||(e[5]=[s("p",null,"Chargement des articles...",-1)])])):d(i).error?(n(),a("div",ue,[s("p",null,m(d(i).error),1)])):d(f).length===0?(n(),a("div",_e,[...e[6]||(e[6]=[s("p",null,"Aucun article trouvÃ©.",-1)])])):(n(),a("div",ge,[s("div",me,[(n(!0),a(P,null,k(d(T),t=>(n(),a("article",{key:t._id,class:"article-card"},[h(u,{to:`/informations-medicales/${t.slug.current}`},{default:O(()=>[s("div",fe,[t.icone?(n(),a("img",{key:0,src:d(R)(t.icone).url(),alt:t.icone.alt||t.titre},null,8,ve)):(n(),a("div",pe,[...e[7]||(e[7]=[s("span",null,"ðŸ“„",-1)])]))]),s("div",he,[s("h2",null,m(t.titre),1),t.tags?.length?(n(),a("div",Pe,[(n(!0),a(P,null,k(t.tags,_=>(n(),a("span",{key:_._id,class:"tag-badge"},m(_.titre),1))),128))])):b("",!0),t.contenu?(n(),a("p",ke,m(q(t.contenu)),1)):b("",!0)])]),_:2},1032,["to"])]))),128))]),d(x)>1?(n(),U(se,{key:0,"current-page":d(g),"onUpdate:currentPage":e[2]||(e[2]=t=>A(g)?g.value=t:null),"total-pages":d(x)},null,8,["current-page","total-pages"])):b("",!0)]))])])])}}}),we=C(be,[["__scopeId","data-v-c5554f69"]]);export{we as default};
