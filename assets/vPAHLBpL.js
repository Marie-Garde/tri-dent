import{_ as b}from"./B-PFB_FM.js";import{_ as C}from"./DPEHLBl3.js";import{u as T,a as q}from"./DTSEQci6.js";import{e as w,y as A,l as N,h as p,c as n,a as s,b as v,n as g,f as l,F as u,i as f,t as d,o,w as $,g as k,_ as B}from"./CpOOP2eM.js";const F={class:"info"},S={class:"info__banner"},V={class:"info__banner__content"},E={class:"info__container"},I={class:"info__sidebar"},L=["onClick"],j={class:"info__content"},z={key:0,class:"loading"},D={key:1,class:"error"},M={key:2,class:"no-articles"},P={key:3,class:"articles-list"},G={class:"article-card__image"},H=["src","alt"],J={key:1,class:"article-card__placeholder"},K={class:"article-card__content"},O={key:0,class:"article-card__tags"},Q={key:1,class:"article-card__excerpt"},R=w({__name:"index",setup(U){const r=T();A(async()=>{await Promise.all([r.fetchArticles(),r.fetchThematiques()])});const _=N(null),y=p(()=>r.thematiques),m=p(()=>{let i=r.articles;return _.value&&(i=i.filter(e=>e.thematique?.some(a=>a._id===_.value))),i});function h(i){_.value=i}function x(i){if(!i||i.length===0)return"";let e="";for(const t of i)if(t._type==="block"&&t.children)for(const c of t.children)c.text&&(e+=c.text+" ");const a=e.trim().split(/\s+/);return a.length<=20?e.trim():a.slice(0,20).join(" ")+"..."}return(i,e)=>{const a=b;return o(),n("div",F,[s("div",S,[s("div",V,[e[1]||(e[1]=s("h1",null,"Informations mÃ©dicales",-1)),v(C,{light:""})])]),s("div",E,[s("div",I,[e[2]||(e[2]=s("h3",null,"ThÃ©matiques",-1)),s("ul",null,[s("li",{class:g({active:l(_)===null})},[s("a",{onClick:e[0]||(e[0]=t=>h(null))},"Toutes les thÃ©matiques")],2),(o(!0),n(u,null,f(l(y),t=>(o(),n("li",{key:t._id,class:g({active:l(_)===t._id})},[s("a",{onClick:c=>h(t._id)},d(t.titre),9,L)],2))),128))])]),s("div",j,[l(r).loading?(o(),n("div",z,[...e[3]||(e[3]=[s("p",null,"Chargement des articles...",-1)])])):l(r).error?(o(),n("div",D,[s("p",null,d(l(r).error),1)])):l(m).length===0?(o(),n("div",M,[...e[4]||(e[4]=[s("p",null,"Aucun article trouvÃ©.",-1)])])):(o(),n("div",P,[(o(!0),n(u,null,f(l(m),t=>(o(),n("article",{key:t._id,class:"article-card"},[v(a,{to:`/informations-medicales/${t.slug.current}`},{default:$(()=>[s("div",G,[t.icone?(o(),n("img",{key:0,src:l(q)(t.icone).url(),alt:t.icone.alt||t.titre},null,8,H)):(o(),n("div",J,[...e[5]||(e[5]=[s("span",null,"ðŸ“„",-1)])]))]),s("div",K,[s("h2",null,d(t.titre),1),t.tags?.length?(o(),n("div",O,[(o(!0),n(u,null,f(t.tags,c=>(o(),n("span",{key:c._id,class:"tag-badge"},d(c.titre),1))),128))])):k("",!0),t.contenu?(o(),n("p",Q,d(x(t.contenu)),1)):k("",!0)])]),_:2},1032,["to"])]))),128))]))])])])}}}),tt=B(R,[["__scopeId","data-v-54bc44a6"]]);export{tt as default};
